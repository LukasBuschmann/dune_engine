digraph "State Machine" {
	graph [color=black directed=true fillcolor=white label="State Machine" rankdir=LR "strict"=false style=solid]
	node [color=black fillcolor=white peripheries=1 shape=rectangle style="rounded, filled"]
	edge [color=black]
	start [label="start\l" color=red fillcolor=darksalmon peripheries=2]
	"Pick Card" [label="Pick Card\l"]
	"Pick Location" [label="Pick Location\l"]
	"Pick Plot" [label="Pick Plot\l"]
	"Card Played" [label="Card Played\l"]
	Revealing [label="Revealing\l"]
	Choicing [label="Choicing\l"]
	Shop [label="Shop\l"]
	Revealed [label="Revealed\l"]
	end [label="end\l"]
	"Evaluate Effect" [label="Evaluate Effect\l"]
	"Pick Plot" -> start [label="<PLOT_INTRIGUE>"]
	"Pick Plot" -> "Card Played" [label="<PLOT_INTRIGUE>"]
	"Pick Plot" -> Shop [label="<PLOT_INTRIGUE>"]
	start -> "Pick Plot" [label=plot]
	start -> end [label=end_turn]
	start -> start [label="deploy_<N>_troops"]
	start -> "Pick Card" [label=agent_turn]
	start -> Revealing [label=reveal]
	"Card Played" -> "Pick Plot" [label=plot]
	"Card Played" -> end [label=end_turn]
	Shop -> "Pick Plot" [label=plot]
	Shop -> end [label=end_turn]
	Shop -> Shop [label="buy_<CARD> | deploy_<N>_troops"]
	Revealed -> end [label=end_turn]
	Revealed -> Shop [label=buy]
	Revealed -> Revealed [label="deploy_<N>_troops"]
	"Pick Card" -> "Pick Location" [label="<CARD>"]
	"Pick Location" -> Choicing [label="<LOCATION>"]
	Revealing -> Revealed [label=done_reveal]
	"Evaluate Effect" -> "Card Played" [label=trivial_effect]
	"Evaluate Effect" -> "Binary Decision" [label=decide_effect]
	"Binary Decision" -> "Card Played" [label=effect_done]
	Choicing -> Choicing [label="<CHOICE>"]
	Choicing -> "Card Played" [label=evaluate_choices]
	end -> start [label=back]
	rankdir=TB
}

